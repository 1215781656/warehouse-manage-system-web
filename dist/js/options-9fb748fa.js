var y=(i,u,a)=>new Promise((n,g)=>{var v=o=>{try{d(a.next(o))}catch(t){g(t)}},h=o=>{try{d(a.throw(o))}catch(t){g(t)}},d=o=>o.done?n(o.value):Promise.resolve(o.value).then(v,h);d((a=a.apply(i,u)).next())});import{K,r as f,x as b}from"./index-0d744b35.js";const z=K("option",()=>{const i=f({list:[],page:1,hasMore:!0,loading:!1,total:0}),u=f({list:[],page:1,hasMore:!0,loading:!1,total:0}),a=f({list:[],page:1,hasMore:!0,loading:!1,total:0}),n=f({list:[],page:1,hasMore:!0,loading:!1,total:0}),g=t=>{switch(t){case"supplier":return i;case"productSpec":return u;case"composition":return a;case"customer":return n}},v=(t,s)=>{var r,e;switch(t){case"supplier":return s.supplier;case"productSpec":return(r=s.colorFabric)==null?void 0:r.productSpec;case"composition":return(e=s.colorFabric)==null?void 0:e.composition;case"customer":return s.customer}},h=t=>{switch(t){case"supplier":return"supplier";case"productSpec":return"productSpec";case"composition":return"composition";case"customer":return"customer"}};return{supplierState:i,productSpecState:u,compositionState:a,customerState:n,loadData:(t,s,r=!1)=>y(void 0,null,function*(){const e=g(t);if(e.value&&!(e.value.loading&&!r)&&(r&&(e.value.page=1,e.value.list=[],e.value.hasMore=!0,e.value.total=0),!(!e.value.hasMore&&!r))){e.value.loading=!0;try{const c={page:e.value.page,pageSize:20},F=h(t);s&&(c[F]=s);let S=b.getInboundList;t==="customer"?S=b.getOutboundList:S=b.getInboundList;const l=yield S(c),w=(l==null?void 0:l.list)||l||[],I=(l==null?void 0:l.total)||0,m=new Set;if(w.forEach(M=>{const p=v(t,M);p&&m.add(p)}),e.value.page===1)e.value.list=Array.from(m);else{const M=new Set(e.value.list);m.forEach(p=>{M.has(p)||e.value.list.push(p)})}e.value.total=I,w.length<c.pageSize?e.value.hasMore=!1:e.value.page++}catch(c){console.error(`Failed to load ${t}`,c)}finally{e.value.loading=!1}}}),invalidate:()=>{i.value={list:[],page:1,hasMore:!0,loading:!1,total:0},u.value={list:[],page:1,hasMore:!0,loading:!1,total:0},a.value={list:[],page:1,hasMore:!0,loading:!1,total:0},n.value={list:[],page:1,hasMore:!0,loading:!1,total:0}}}});export{z as u};

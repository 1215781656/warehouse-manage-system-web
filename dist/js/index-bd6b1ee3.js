var g=(c,m,a)=>new Promise((r,n)=>{var o=s=>{try{u(a.next(s))}catch(e){n(e)}},_=s=>{try{u(a.throw(s))}catch(e){n(e)}},u=s=>s.done?r(s.value):Promise.resolve(s.value).then(o,_);u((a=a.apply(c,m)).next())});import{d as k,u as C,r as v,a as B,c as E,b as t,w as l,e as N,f as d,o as R,g as w,h as U,E as b,_ as q}from"./index-0d744b35.js";const S={class:"login-page"},I={class:"submit-item"},M=k({__name:"index",setup(c){const m=N(),a=C(),r=v(!1),n=v(),o=B({username:"admin",password:"123456"}),_={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},u=()=>{n.value.validate(s=>g(this,null,function*(){if(s){r.value=!0;try{const e=yield a.login(o.username,o.password);e.success?(b.success("登录成功"),m.push("/")):b.error(e.message||"登录失败")}finally{r.value=!1}}}))};return(s,e)=>{const f=d("el-input"),i=d("el-form-item"),x=d("el-button"),y=d("el-form"),V=d("el-card");return R(),E("div",S,[t(V,{class:"login-card"},{default:l(()=>[e[3]||(e[3]=w("h2",{class:"title"},"登录",-1)),t(y,{model:o,rules:_,ref_key:"formRef",ref:n,"label-width":"80px"},{default:l(()=>[t(i,{label:"用户名",prop:"username"},{default:l(()=>[t(f,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=p=>o.username=p)},null,8,["modelValue"])]),_:1}),t(i,{label:"密码",prop:"password"},{default:l(()=>[t(f,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=p=>o.password=p),type:"password"},null,8,["modelValue"])]),_:1}),t(i,null,{default:l(()=>[w("div",I,[t(x,{type:"primary",onClick:u,loading:r.value},{default:l(()=>[...e[2]||(e[2]=[U("登录",-1)])]),_:1},8,["loading"])])]),_:1})]),_:1},8,["model"])]),_:1})])}}});const j=q(M,[["__scopeId","data-v-a4ce4e30"]]);export{j as default};

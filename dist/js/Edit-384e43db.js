var k=(g,V,m)=>new Promise((s,f)=>{var o=r=>{try{i(m.next(r))}catch(c){f(c)}},p=r=>{try{i(m.throw(r))}catch(c){f(c)}},i=r=>r.done?s(r.value):Promise.resolve(r.value).then(o,p);i((m=m.apply(g,V)).next())});import{d as B,r as _,k as W,l as $,c as G,g as U,b as l,w as a,G as M,e as T,M as N,E as x,f as d,o as F,h as b,i as C,_ as O}from"./index-0d744b35.js";import{T as j}from"./TaxInvoiceUpload-5376d54e.js";import{G as q}from"./GeneralFileUpload-88415f7b.js";import{O as z}from"./OperationBar-ba9dfaef.js";const H={class:"edit-page"},J={class:"page-header"},K=B({__name:"Edit",setup(g){const V=M(),m=T(),s=String(V.params.id||""),f=_(),o=_({}),p=_([]),i=_([]),r=W(()=>{const n=Number(o.value.payableAmount||0),e=Number(o.value.paidAmount||0);return(n-e).toFixed(2)}),c=()=>k(this,null,function*(){try{const n=yield N.getPayableDetail(s),e=(n==null?void 0:n.data)||n;o.value={inboundDate:e.inboundDate,inboundNo:e.inboundNo,code:e.code,supplier:e.supplier,productSpec:e.productSpec,composition:e.composition,color:e.color,craft:e.craft,fabricWeight:e.fabricWeight,customerRemark:e.customerRemark,pieceCount:e.pieceCount,totalWeight:e.totalWeight,unitPrice:e.unitPrice,payableAmount:e.payableAmount,paidAmount:e.paidAmount,taxInvoiceAmount:e.taxInvoiceAmount,remark:e.remark},p.value=(e==null?void 0:e.taxAttachments)||[],i.value=(e==null?void 0:e.otherAttachments)||[]}catch(n){x.error("加载失败")}}),I=()=>k(this,null,function*(){try{yield N.updatePayable(s,o.value),x.success("保存成功"),m.back()}catch(n){x.error("保存失败")}});return $(c),(n,e)=>{const y=d("el-button"),E=d("el-date-picker"),u=d("el-form-item"),v=d("el-input"),w=d("el-col"),A=d("el-input-number"),R=d("el-row"),D=d("el-divider"),P=d("el-form"),S=d("el-card");return F(),G("div",H,[U("div",J,[l(y,{onClick:e[0]||(e[0]=t=>n.$router.back())},{default:a(()=>[...e[12]||(e[12]=[b("返回",-1)])]),_:1}),e[13]||(e[13]=U("h3",null,"编辑应付",-1))]),l(S,null,{default:a(()=>[l(P,{model:o.value,"label-width":"100px",ref_key:"formRef",ref:f},{default:a(()=>[l(R,{gutter:24},{default:a(()=>[l(w,{span:12},{default:a(()=>[l(u,{label:"入库日期"},{default:a(()=>[l(E,{modelValue:o.value.inboundDate,"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.inboundDate=t),style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(u,{label:"货单编号"},{default:a(()=>[l(v,{modelValue:o.value.inboundNo,"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.inboundNo=t)},null,8,["modelValue"])]),_:1}),l(u,{label:"供应商"},{default:a(()=>[l(v,{modelValue:o.value.supplier,"onUpdate:modelValue":e[3]||(e[3]=t=>o.value.supplier=t)},null,8,["modelValue"])]),_:1}),l(u,{label:"品名规格"},{default:a(()=>[l(v,{modelValue:o.value.productSpec,"onUpdate:modelValue":e[4]||(e[4]=t=>o.value.productSpec=t)},null,8,["modelValue"])]),_:1})]),_:1}),l(w,{span:12},{default:a(()=>[l(u,{label:"应付金额"},{default:a(()=>[l(A,{modelValue:o.value.payableAmount,"onUpdate:modelValue":e[5]||(e[5]=t=>o.value.payableAmount=t),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(u,{label:"已付金额"},{default:a(()=>[l(A,{modelValue:o.value.paidAmount,"onUpdate:modelValue":e[6]||(e[6]=t=>o.value.paidAmount=t),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(u,{label:"税票金额"},{default:a(()=>[l(A,{modelValue:o.value.taxInvoiceAmount,"onUpdate:modelValue":e[7]||(e[7]=t=>o.value.taxInvoiceAmount=t),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(u,{label:"未付金额"},{default:a(()=>[l(v,{value:r.value,disabled:""},null,8,["value"])]),_:1})]),_:1})]),_:1}),l(u,{label:"备注"},{default:a(()=>[l(v,{modelValue:o.value.remark,"onUpdate:modelValue":e[8]||(e[8]=t=>o.value.remark=t),type:"textarea",rows:3},null,8,["modelValue"])]),_:1}),l(D,{"content-position":"left"},{default:a(()=>[...e[14]||(e[14]=[b("附件",-1)])]),_:1}),l(u,{label:"税票附件"},{default:a(()=>[l(j,{"model-value":p.value,"record-type":"payable","record-id":C(s),"onUpdate:modelValue":e[9]||(e[9]=t=>p.value=t)},null,8,["model-value","record-id"])]),_:1}),l(u,{label:"其他附件"},{default:a(()=>[l(q,{"model-value":i.value,"record-type":"payable","record-id":C(s),"onUpdate:modelValue":e[10]||(e[10]=t=>i.value=t)},null,8,["model-value","record-id"])]),_:1})]),_:1},8,["model"])]),_:1}),l(z,null,{button:a(()=>[l(y,{onClick:e[11]||(e[11]=t=>n.$router.back())},{default:a(()=>[...e[15]||(e[15]=[b("返回",-1)])]),_:1}),l(y,{type:"primary",onClick:I},{default:a(()=>[...e[16]||(e[16]=[b("保存",-1)])]),_:1})]),_:1})])}}});const h=O(K,[["__scopeId","data-v-02231859"]]);export{h as default};

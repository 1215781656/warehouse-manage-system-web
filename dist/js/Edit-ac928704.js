var y=(g,V,i)=>new Promise((s,f)=>{var l=r=>{try{m(i.next(r))}catch(c){f(c)}},p=r=>{try{m(i.throw(r))}catch(c){f(c)}},m=r=>r.done?s(r.value):Promise.resolve(r.value).then(l,p);m((i=i.apply(g,V)).next())});import{d as W,r as _,k as $,l as G,c as M,g as U,b as o,w as a,G as P,e as T,M as N,E as x,f as d,o as F,h as b,i as C,_ as O}from"./index-df9e2be5.js";import{T as j}from"./TaxInvoiceUpload-5d5a3401.js";import{G as q}from"./GeneralFileUpload-45921d0a.js";import{O as z}from"./OperationBar-90a480f9.js";const H={class:"edit-page"},J={class:"page-header"},K=W({__name:"Edit",setup(g){const V=P(),i=T(),s=String(V.params.id||""),f=_(),l=_({}),p=_([]),m=_([]),r=$(()=>{const u=Number(l.value.receivableAmount||0),e=Number(l.value.receivedAmount||0);return(u-e).toFixed(2)}),c=()=>y(this,null,function*(){try{const u=yield N.getReceivableDetail(s),e=(u==null?void 0:u.data)||u;l.value={outboundDate:e.outboundDate,outboundNo:e.outboundNo,deliveryNo:e.deliveryNo||e.code,customer:e.customer,productSpec:e.productSpec,composition:e.composition,color:e.color,craft:e.craft,fabricWeight:e.fabricWeight,customerRemark:e.customerRemark,pieceCount:e.pieceCount,totalWeight:e.totalWeight,unitPrice:e.unitPrice,receivableAmount:e.receivableAmount,receivedAmount:e.receivedAmount,taxInvoiceAmount:e.taxInvoiceAmount,remark:e.remark},p.value=(e==null?void 0:e.taxAttachments)||[],m.value=(e==null?void 0:e.otherAttachments)||[]}catch(u){x.error("加载失败")}}),R=()=>y(this,null,function*(){try{yield N.updateReceivable(s,l.value),x.success("保存成功"),i.back()}catch(u){x.error("保存失败")}});return G(c),(u,e)=>{const A=d("el-button"),I=d("el-date-picker"),n=d("el-form-item"),v=d("el-input"),w=d("el-col"),k=d("el-input-number"),E=d("el-row"),D=d("el-divider"),S=d("el-form"),B=d("el-card");return F(),M("div",H,[U("div",J,[o(A,{onClick:e[0]||(e[0]=t=>u.$router.back())},{default:a(()=>[...e[12]||(e[12]=[b("返回",-1)])]),_:1}),e[13]||(e[13]=U("h3",null,"编辑应收",-1))]),o(B,null,{default:a(()=>[o(S,{model:l.value,"label-width":"100px",ref_key:"formRef",ref:f},{default:a(()=>[o(E,{gutter:24},{default:a(()=>[o(w,{span:12},{default:a(()=>[o(n,{label:"出货日期"},{default:a(()=>[o(I,{modelValue:l.value.outboundDate,"onUpdate:modelValue":e[1]||(e[1]=t=>l.value.outboundDate=t),style:{width:"100%"}},null,8,["modelValue"])]),_:1}),o(n,{label:"编号"},{default:a(()=>[o(v,{modelValue:l.value.code,"onUpdate:modelValue":e[2]||(e[2]=t=>l.value.code=t)},null,8,["modelValue"])]),_:1}),o(n,{label:"客户"},{default:a(()=>[o(v,{modelValue:l.value.customer,"onUpdate:modelValue":e[3]||(e[3]=t=>l.value.customer=t)},null,8,["modelValue"])]),_:1}),o(n,{label:"品名规格"},{default:a(()=>[o(v,{modelValue:l.value.productSpec,"onUpdate:modelValue":e[4]||(e[4]=t=>l.value.productSpec=t)},null,8,["modelValue"])]),_:1})]),_:1}),o(w,{span:12},{default:a(()=>[o(n,{label:"应收金额"},{default:a(()=>[o(k,{modelValue:l.value.receivableAmount,"onUpdate:modelValue":e[5]||(e[5]=t=>l.value.receivableAmount=t),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),o(n,{label:"已收金额"},{default:a(()=>[o(k,{modelValue:l.value.receivedAmount,"onUpdate:modelValue":e[6]||(e[6]=t=>l.value.receivedAmount=t),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),o(n,{label:"税票金额"},{default:a(()=>[o(k,{modelValue:l.value.taxInvoiceAmount,"onUpdate:modelValue":e[7]||(e[7]=t=>l.value.taxInvoiceAmount=t),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),o(n,{label:"未收金额"},{default:a(()=>[o(v,{value:r.value,disabled:""},null,8,["value"])]),_:1})]),_:1})]),_:1}),o(n,{label:"备注"},{default:a(()=>[o(v,{modelValue:l.value.remark,"onUpdate:modelValue":e[8]||(e[8]=t=>l.value.remark=t),type:"textarea",rows:3},null,8,["modelValue"])]),_:1}),o(D,{"content-position":"left"},{default:a(()=>[...e[14]||(e[14]=[b("附件",-1)])]),_:1}),o(n,{label:"税票附件"},{default:a(()=>[o(j,{"model-value":p.value,"record-type":"receivable","record-id":C(s),"onUpdate:modelValue":e[9]||(e[9]=t=>p.value=t)},null,8,["model-value","record-id"])]),_:1}),o(n,{label:"其他附件"},{default:a(()=>[o(q,{"model-value":m.value,"record-type":"receivable","record-id":C(s),"onUpdate:modelValue":e[10]||(e[10]=t=>m.value=t)},null,8,["model-value","record-id"])]),_:1})]),_:1},8,["model"])]),_:1}),o(z,null,{button:a(()=>[o(A,{onClick:e[11]||(e[11]=t=>u.$router.back())},{default:a(()=>[...e[15]||(e[15]=[b("返回",-1)])]),_:1}),o(A,{type:"primary",onClick:R},{default:a(()=>[...e[16]||(e[16]=[b("保存",-1)])]),_:1})]),_:1})])}}});const h=O(K,[["__scopeId","data-v-59a10675"]]);export{h as default};

var M=(w,t,d)=>new Promise((b,v)=>{var p=n=>{try{u(d.next(n))}catch(_){v(_)}},g=n=>{try{u(d.throw(n))}catch(_){v(_)}},u=n=>n.done?b(n.value):Promise.resolve(n.value).then(p,g);u((d=d.apply(w,t)).next())});import{d as F,r as m,l as U,N as H,F as J,k as S,f as y,o as c,c as B,g as N,H as R,I,q as z,w as l,h as A,t as T,J as $,b as k,i as O,O as P,v as j,n as G,P as K,_ as Q}from"./index-df9e2be5.js";const X={class:"actions-visible"},Y=["onClick"],Z=F({__name:"ResponsiveActions",props:{items:{},fixed:{type:Boolean},buttonType:{}},setup(w){const t=w,d=m(null),b=m(null),v=m(null),p=m([]),g=m(0),u=m(t.items.length),n=(h,o)=>{let s=0;return(...f)=>{const a=Date.now();a-s>o&&(s=a,h(...f))}},_=()=>M(this,null,function*(){var C,x,e,r;yield K();const h=((C=b.value)==null?void 0:C.querySelectorAll(".el-button"))||[];p.value=Array.from(h).slice(0,t.items.length).map(i=>i.offsetWidth),g.value=((e=(x=v.value)==null?void 0:x.$el)==null?void 0:e.offsetWidth)||0;const o=8,s=((r=d.value)==null?void 0:r.clientWidth)||0;let f=0,a=0;for(let i=0;i<p.value.length;i++){const E=p.value[i],L=a===0?E:f+o+E,D=i<p.value.length-1?o+g.value:0;if(L+D<=s)f=L,a++;else break}u.value=a}),V=n(()=>_(),120);U(()=>{_(),window.addEventListener("resize",V)}),H(()=>{window.removeEventListener("resize",V)}),J(()=>t.items,()=>_(),{deep:!0});const q=S(()=>t.items.slice(0,u.value)),W=S(()=>t.items.slice(u.value));return(h,o)=>{const s=y("el-button"),f=y("el-icon"),a=y("el-dropdown-item"),C=y("el-dropdown-menu"),x=y("el-dropdown");return c(),B("div",{class:G(["responsive-actions",t.fixed?"fixed-bar":""]),ref_key:"container",ref:d},[N("div",X,[(c(!0),B(R,null,I(q.value,(e,r)=>(c(),z(s,{key:r,type:"primary",link:"",style:$(e.danger?"color:#ff4d4f":""),disabled:e.disabled,loading:e.loading,onClick:i=>e.onClick()},{default:l(()=>[A(T(e.label),1)]),_:2},1032,["style","disabled","loading","onClick"]))),128)),W.value.length?(c(),z(x,{key:0},{dropdown:l(()=>[k(C,null,{default:l(()=>[(c(!0),B(R,null,I(W.value,(e,r)=>(c(),z(a,{key:r},{default:l(()=>[N("span",{style:$(e.danger?"color:#ff4d4f":""),onClick:i=>e.onClick()},T(e.label),13,Y)]),_:2},1024))),128))]),_:1})]),default:l(()=>[k(s,{type:"primary",link:""},{default:l(()=>[o[0]||(o[0]=A(" 更多 ",-1)),k(f,null,{default:l(()=>[k(O(P))]),_:1})]),_:1})]),_:1})):j("",!0)]),N("div",{class:"actions-measure",ref_key:"measure",ref:b},[(c(!0),B(R,null,I(w.items,(e,r)=>(c(),z(s,{key:r,type:e.type||t.buttonType||"default"},{default:l(()=>[A(T(e.label),1)]),_:2},1032,["type"]))),128)),k(s,{type:"primary",link:"",ref_key:"moreBtn",ref:v},{default:l(()=>[...o[1]||(o[1]=[A("更多",-1)])]),_:1},512)],512)],2)}}});const oe=Q(Z,[["__scopeId","data-v-a0970179"]]);export{oe as R};

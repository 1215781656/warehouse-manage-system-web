1.色布出入库管理系统需求分析（优化版）
一、核心模块优化建议

1. 入库管理
   • 字段优化：◦ 删除重复字段：全幅(cm)（与全幅宽(cm)重复）◦ 增加唯一性约束：色布 ID（自动生成规则：CB\_年份+月份+流水号）• 逻辑补充：◦ 入库时校验供应商是否存在 ◦ 金额自动计算：金额 = 单价 × 重量
2. 出库管理
   • 字段优化：◦ 合并重复字段：品名规格、成分等与入库信息通过色布 ID 关联 ◦ 增加必填项：签收人（出库必填）• 流程补充：◦ 出库前校验库存余量 ◦ 发货单生成规则：HD\_年份+月份+客户代码+流水号
3. 库存管理
   • 字段优化：◦ 拆分字段：入库匹数 → 累计入库匹数，出库匹数 → 累计出库匹数 ◦ 增加计算字段：库存余量匹数 = 累计入库匹数 - 累计出库匹数• 预警功能：◦ 库存阈值设置（如低于安全库存时标红）
4. 应收管理
   • 字段优化：◦ 精简字段：删除成分、克重等可通过色布 ID 关联获取的信息 ◦ 增加状态标识：收款状态（未收/部分收/已收）• 计算逻辑：◦ 未收金额 = 应收金额 - 已收金额
5. 应付管理
   • 字段优化：◦ 精简字段：删除全幅宽（与入库信息关联）◦ 增加字段：付款计划（分阶段付款时填写）• 计算逻辑：◦ 未付金额 = 应付金额 - 已付金额
   二、数据表结构设计
   表名 核心字段 关联关系
   色布主表 色布 ID、品名规格、成分、克重、全幅宽、颜色、色号、缸号 主键，全局唯一
   入库单表 入库 ID、色布 ID、日期、货单号、供应商、匹数、重量、单价、金额、操作人 外键关联色布主表
   出库单表 出库 ID、色布 ID、出货日期、货单号、客户、匹数、重量、单价、金额、签收人 外键关联色布主表
   库存表 色布 ID、累计入库匹数、累计出库匹数、当前库存匹数、当前库存重量(kg) 外键关联色布主表
   应收表 应收 ID、出库 ID、客户、应收金额、已收金额、未收金额、收款状态、备注 外键关联出库单表
   应付表 应付 ID、入库 ID、供应商、应付金额、已付金额、未付金额、付款计划、备注 外键关联入库单表
   三、关键业务流程
6. 入库流程
   • 异常处理：重复色布 ID 时提示，供应商不存在时禁止保存
   a. 输入供应商/色布信息 → 2. 自动生成色布 ID → 3. 录入数量/单价 → 4. 计算金额 → 5. 保存至入库单表
7. 出库流程
   • 异常处理：库存不足时弹窗警告，客户信息缺失时必填提示
   a. 选择色布 → 2. 校验库存余量 → 3. 录入客户/数量 → 4. 生成发货单 → 5. 扣减库存 → 6. 生成应收记录
8. 库存同步
   • 每次出入库操作后，通过触发器或计划任务更新库存表
   四、界面设计建议
9. 主仪表盘
   • 快速入口：入库/出库/库存/应收/应付• 关键指标：今日出入库量、库存总量、应收总额、应付总额
   表格展示的信息需要严格按照如下来展示： 2. 入库管理
   字段（表格列）：
   日期、货单号、供应商、品名规格、成分（如 95%棉 5%氨纶）、克重(g/m²)、全幅宽(cm)、颜色、色号、缸号、匹数、重量(kg)、单价(元)、金额(元) 3.出库管理
   字段：
   出货日期、货单号、编号、客户、品名规格、成分、颜色、工艺、克重(g/m²)、客户备注、匹数、重量(kg)、单价(元)、金额(元)、签收人、备注
10. 库存管理
    字段：
    品名规格、成分、克重(g/m²)、全幅(cm)、颜色、色号、入库匹数、入库重量(kg)、出库匹数、出库重量(kg)、库存匹数、库存重量(kg)
11. 应收管理
    字段：
    出货日期、货单号、编号、客户、品名规格、成分、颜色、工艺、克重、备注、匹数、重量(kg)、单价（元）、应收金额（元）、已收金额（元）、税票金额（元）、未收金额（元）、备注
12. 应付管理
    字段：
    日期、货单号、供应商、品名规格、成分、克重、全幅宽、颜色、色号、缸号、备注、匹数、重量(kg)、单价（元）、应付金额（元）、已付金额（元）、税票金额（元）、未付金额（元）、备注
    注意点：
    货单号、编号等，全部都是由用户输入，不做校验，只是当做普通的字段，不作唯一校验。
    五、技术实现要点
13. 数据库设计
    • 使用 MySQL/MongoDB 存储结构化数据• 索引优化：对色布 ID、货单号等高频查询字段建立索引
14. 功能扩展性
    • 预留 API 接口：未来对接 ERP/财务系统• 配置化能力：税率、打印模板等参数可自定义
15. 安全策略
    • 数据校验：金额字段限制为数字，日期格式校验• 权限控制：分角色权限（如仓库管理员/财务人员）
    六、问题修正清单
16. 字段冗余：删除出/入库单表中重复的成分、克重等字段（通过色布 ID 关联获取）
17. 计算字段：库存表增加当前库存重量自动计算逻辑
18. 流程闭环：出库时需同步生成应收记录，入库时生成应付记录
19. 状态标识：应收/应付表增加状态字段（未结/已结）
    交付物建议：
20. 优先开发 MVP 版本（入库/出库+库存查询）
21. 二期增加报表模块（库存周转率、应收账龄分析）
22. 三期扩展多仓库管理和批次追溯功能

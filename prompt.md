一、项目初始化指令
你是一个资深全栈开发工程师，负责构建色布出入库管理系统。请按照以下要求分阶段开发：
技术栈要求
● 前端：Vue3 + Element Plus + TypeScript
● 后端：Node.js + NestJS + MySQL
● 部署：Docker + Nginx
● 设计规范：Ant Design Pro 组件库 + TailwindCSS
架构规范

1. 采用模块化开发，每个业务模块独立目录
2. 数据库设计遵循 DDD 领域驱动设计
3. 接口采用 RESTful 规范，版本号/v1
4. 权限系统基于 RBAC 模型，预留 OAuth2.0 扩展
   二、一期开发提示词（核心功能）
   目标： 实现基础 CRUD 和库存管理
   页面结构要求
5. 全局布局：
   ○ 顶部：应用管理入口（微服务风格，支持横向扩展）
   ○ 左侧：侧边栏导航（支持三级菜单折叠）
   ○ 右侧：内容区（含面包屑导航、搜索栏、数据表格）
6. 表格配置规范：
   ○ 分页组件：每页 10/20/50 条切换
   ○ 操作列：默认包含「编辑」「删除」按钮
   ○ 自定义列：允许用户拖拽排序
   ○ 筛选器：支持多条件组合查询
   模块实现指令
7. 入库管理
   ○ 字段严格按需求文档排列
   ○ 色布 ID 生成规则：CB\_年份(4 位)+月份(2 位)+流水号(4 位)
   ○ 金额字段自动计算（单价 × 重量），保留两位小数
8. 出库管理
   ○ 关联入库记录校验库存
   ○ 签收人字段支持多选（预设常用客户）
   ○ 发货单生成按钮触发 PDF 下载（使用 html2pdf.js）
9. 库存管理
   ○ 实时计算公式：
   库存匹数 = SUM(入库匹数) - SUM(出库匹数)
   库存重量 = SUM(入库重量) - SUM(出库重量)
   ○ 库存预警：低于安全库存时标红
   代码规范
10. 前端：
    ○ 使用 Pinia 管理全局状态
    ○ API 请求统一封装 axios 实例
    ○ 表格组件抽离为可复用模块
11. 后端：
    ○ 数据库表添加 create_time/update_time 字段
    ○ 金额字段使用 DECIMAL(10,2)类型
    ○ 事务处理保证库存数据一致性
    三、二期开发提示词（扩展功能）
    目标： 完善业务闭环和系统工具
    新增模块
12. 应收应付管理
    ○ 关联出/入库单自动计算金额
    ○ 支持分阶段付款状态标记
    ○ 税票上传功能（限制 PDF 格式）
13. 报表中心
    ○ 库存周转率报表（按颜色/品类分组）
    ○ 应收账龄分析表（30/60/90 天分级）
    ○ 支持 Excel 导出（使用 xlsx 库）
    系统工具
14. 权限管理
    ○ 按角色分配数据查看范围
    ○ 操作日志记录（记录增删改操作）
15. 数据维护
    ○ 批量导入导出功能（支持 CSV）
    ○ 数据校验规则配置后台
    性能优化
16. 数据库索引优化：
    ○ 在 color、category 等高频查询字段添加索引
    ○ 库存表添加复合索引（color+size）
17. 缓存策略：
    ○ 使用 Redis 缓存库存数据
    ○ 热点数据预加载机制
    四、UI 设计规范
18. 颜色方案
    ○ 主色调：#1890ff（科技蓝）
    ○ 警示色：#ff4d4f（危险操作）
    ○ 成功色：#52c41a（完成状态）
19. 表格样式
    ○ 表头背景色：#fafafa
    ○ 交替行颜色：#fafafa（间隔行）
    ○ 悬停高亮：#e6f7ff
20. 响应式布局
    ○ 1440px 宽度为基准
    ○ 侧边栏折叠阈值：768px
    ○ 移动端优先显示核心字段
    五、交付物清单
    一期交付：
    ● 基础 CRUD 功能完整代码
    ● 数据库 ER 图及迁移脚本
    ● 接口文档（Postman 集合）
    ● 部署 Dockerfile
    二期交付：
    ● 报表模块及导出功能
    ● 权限管理系统
    ● 自动化测试用例
    ● 监控看板（Prometheus+Grafana）
    六、注意事项
21. 字段校验规则：
    • 数值字段限制为正数• 日期字段格式 YYYY-MM-DD• 色号字段正则校验（^[A-Z]{2}\d{3}$）
22. 特殊处理：
    • 全幅宽字段单位自动补全（cm→ 厘米）• 重量字段支持 kg/g 单位切换• 金额字段千分位符显示
23. 异常处理：
    • 库存负数时禁止出库• 重复货单号预警提示• 网络中断自动保存草稿

生成策略建议

1. 分步生成：先创建基础 CRUD 模块，再逐步扩展业务逻辑
2. 组件复用：将搜索栏、分页器等通用组件抽象为独立模块
3. 测试先行：为关键业务逻辑（如库存计算）编写单元测试
4. 文档同步：使用 TypeDoc 自动生成 API 网页

该提示词已集成需求分析中的所有业务规则和 UI 规范，可直接用于 AI 代码生成。建议配合https://readdy.dev等AI编程工具实现可视化开发。
沟通原则
● 明确优先：有任何不明确的地方，必须先向我确认后再实现；
● 自动推进：在需求已澄清且无明显歧义的前提下，你应在同一轮对话中，自动推进各阶段，不必等待我逐一下达每个阶段的指令，其中：
○ 完成页面代码实现后，必须自动进入界面验证，在验证完成（或确认受限无法执行）之前，禁止将当前页面标记为“已完成”；
○ 如在任一阶段发现新的不确定点（业务含义、字段定义、交互期望等），应立即暂停自动推进，并向我发问澄清。
● 渐进式同步：每完成一个关键阶段（例如：界面信息构建文档、首版代码实现、界面验证），用简短小节向我说明当前阶段的产出和下一步计划，便于我在需要时插入反馈或调整方向。
● 问题导向：遇到技术难点或规范冲突时主动提出，并给出至少一个备选方案。
● 完成后需要进行 dev 验证，如果终端有报错需要解决，解决后继续验证，直到通过。
